{% extends 'layout.html' %} {% block title %}Nueva Publicación{% endblock %} {% block content %}
<link rel="stylesheet" href="https://unpkg.com/easymde/dist/easymde.min.css" />
<script src="https://unpkg.com/easymde/dist/easymde.min.js"></script>

<link rel="stylesheet" href="{{ url_for('static', filename='markdown.css') }}" />

<div class="container">
  <h1>Nueva Publicación</h1>

  <form method="post" class="form">
    <label
      >Título
      <input type="text" name="title" required />
    </label>

    <label
      >Contenido
      <textarea id="markdown-editor" name="content"></textarea>
    </label>

    <button type="submit">Publicar</button>
  </form>
</div>

<script>
  const easyMDE = new EasyMDE({
    element: document.getElementById('markdown-editor'),
    spellChecker: false,
    autosave: {
      enabled: true,
      delay: 1000,
      uniqueId: 'post_content_new',
    },
  })

  document.querySelector('form').addEventListener('submit', function (e) {
    const content = easyMDE.value().trim()

    if (!content) {
      e.preventDefault()
      alert('El contenido no puede estar vacío')
      return
    }

    document.getElementById('markdown-editor').value = content
  })
</script>
{% endblock %}
